<!DOCTYPE>
<html lang="en">

<head>
    <title>CB Manager - Dashboard</title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
    <script type="text/javascript" src="http://rawgit.com/vitmalina/w2ui/master/dist/w2ui.min.js"></script>
    <link rel="stylesheet" type="text/css" href="http://rawgit.com/vitmalina/w2ui/master/dist/w2ui.min.css" />
    <script type="text/javascript" src="/dashboard/util/grid.js"></script>
    <script type="text/javascript" src="/dashboard/index/base.js"></script>
    <script type="text/javascript" src="/dashboard/index/exec-env.js"></script>
    <script type="text/javascript" src="/dashboard/index/exec-env-type.js"></script>
    <script type="text/javascript" src="/dashboard/index/network-link.js"></script>
    <script type="text/javascript" src="/dashboard/index/network-link-type.js"></script>
    <script type="text/javascript" src="/dashboard/index/connection.js"></script>
    <script type="text/javascript" src="/dashboard/index/agent-catalog.js"></script>
    <script type="text/javascript" src="/dashboard/index/agent-instance.js"></script>
    <script type="text/javascript" src="/dashboard/util/log.js"></script>
</head>

<body>
    <div id="main" style="width: 100%; height: 400px;"></div>

    <script type="text/javascript">
        $(function() {
            exec_env_type = new Exec_Env_Type_Index();
            exec_env = new Exec_Env_Index();
            network_link_type = new Network_Link_Type_Index();
            network_link = new Network_Link_Index();
            connection = new Connection_Index();
            agent_catalog = new Agent_Catalog_Index();
            agent_instance = new Agent_Instance_Index();
            log = new Log();

            const layout = {
                name: 'layout',
                padding: 0,
                panels: [{
                    type: 'left',
                    size: 200,
                    resizable: true,
                    minSize: 0
                }, {
                    type: 'main',
                    minSize: 550,
                    overflow: 'hidden'
                }]
            };

            const sidebar = {
                name: 'sidebar',
                flat: false,
                flatButton: false,
                icon: 'icon-page',
                keyboard: true,
                topHTML: 'TODO',
                bottomHTML: 'TODO',
                menu: ['TODO'],
                nodes: [{
                    id: 'astrid',
                    text: 'ASTRID',
                    group: true,
                    expanded: true,
                    nodes: [
                        exec_env.sidebar(true),
                        exec_env_type.sidebar(false),
                        network_link.sidebar(false),
                        network_link_type.sidebar(false),
                        connection.sidebar(false),
                        agent_instance.sidebar(false),
                        agent_catalog.sidebar(false),
                        log.sidebar(false)
                    ]
                }],
                onClick: (event) => w2ui.layout.html('main', w2ui[event.target])
            };

            $('#main').w2layout(layout);
            $().w2grid(exec_env_type.config);
            const ee = $().w2grid(exec_env.config);
            $().w2grid(network_link_type.config);
            $().w2grid(network_link.config);
            $().w2grid(connection.config);
            $().w2grid(agent_catalog.config);
            $().w2grid(agent_instance.config);
            $().w2grid(log.config);
            const sdb = $().w2sidebar(sidebar);
            w2ui.layout.html('main', ee);
            w2ui.layout.html('left', sdb);

            Base_Index.read();
        });
    </script>
</body>

</html>
